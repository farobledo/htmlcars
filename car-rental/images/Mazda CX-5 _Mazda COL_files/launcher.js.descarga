!function s(a,r,c){function d(t,e){if(!r[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(p)return p(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var o=r[t]={exports:{}};a[t][0].call(o.exports,function(e){return d(a[t][1][e]||e)},o,o.exports,s,a,r,c)}return r[t].exports}for(var p="function"==typeof require&&require,e=0;e<c.length;e++)d(c[e]);return d}({1:[function(n,i,o){!function(e){if("object"==typeof i&&"object"==typeof i.exports){var t=e(n,o);void 0!==t&&(i.exports=t)}else"function"==typeof define&&define.amd&&define(["require","exports"],e)}(function(e,t){"use strict";t.__esModule=!0;var n=function(){function e(){this._indexHTMLAlpha='<!doctype html><html><head>  <meta charset="utf-8">  <meta http-Equiv="Cache-Control" Content="no-cache" />  <meta http-Equiv="Pragma" Content="no-cache" />  <meta http-Equiv="Expires" Content="0" />  <title>Pin Session</title>  <style>    body {      overflow: hidden;      font-family: "HelveticaNeue", "Helvetica Neue", "Open Sans", Helvetica, Arial;    }    #pin-session-text {      text-align: center;    }    /* PIN SESSION STYLES */    #pin-session {      position: fixed;      font-weight: lighter;      left: 0;      bottom: 0;      height: 32px;      /*padding-left: 32px;*/      padding-left: 10px;      z-index: 9999;    }    #pin-session #pin-session-container {      background: #333333;      background: rgba(51, 51, 51, 0.8);      height: 24px;      -webkit-box-sizing: content-box;      -moz-box-sizing: content-box;      box-sizing: content-box;      /*margin-right: -44px;*/      border-right: 2px solid #0d8abe;      padding: 4px 0 4px 28px;    }    #pin-session #pin-session-container span.pin {      color: white;      display: inline-block;      font-size: 14px;      letter-spacing: 0.08em;      margin: 4px 7px 0 0;      font-family: Helvetica, arial, sans-serif;      padding: 0 5px;    }    #pin-session #pin-session-container .info {      position: absolute;      border: none;      top: 8px;      padding: 0;      left: 38px;    }    #pin-session #pin-session-container .info span {      background: none repeat scroll 0 0 rgba(0, 0, 0, 0.2);      border-radius: 16px;      color: white;      display: inline-block;      font-size: 12px;      margin-right: 6px;      padding: 2px;      text-align: center;      width: 15px;      position: relative;      cursor: pointer;      font-family: Helvetica, arial, sans-serif;      line-height: 15px;    }    #pin-session #pin-session-container .info .info_txt {      display: none;      font-size: 12px;      width: 250px;      background: white;      background: rgba(255, 255, 255, 0.95);      padding: 14px;      border-radius: 4px;      color: #333333;      text-align: left;      position: absolute;      box-shadow: 4px 4px 1px rgba(0, 0, 0, 0.3);      border: 1px solid #e7e7e7;      line-height: 1.4em;      font-family: Helvetica, Arial, sans-serif;      bottom: 30px;      left: 0px;    }    #pin-session #pin-session-container .info .info_txt p {      margin: 2px 0 0;      padding: 0;    }    #pin-session #pin-session-container .info:hover .info_txt {      display: block;    }    #pin-session .pin_ico {      height: 32px;      width: 32px;      left: 0;      cursor: pointer;      top: 0;      background: #333333;      position: absolute;    }    #pin-session .pin_ico .label {      left: 9px;      top: 3px;      background: none;      padding: 0;      position: absolute;      font-family: Helvetica, Arial, sans-serif;      font-size: 9px;      color: #cccccc;      font-weight: normal;      margin: 0;      width: auto;      height: auto;      line-height: 10px;    }    #pin-session .pin_ico ul.dots {      margin: 0 auto;      padding: 0;      width: 15px;      height: 4px;    }    #pin-session .pin_ico ul.dots li {      list-style: none;      background: white;      height: 3px;      width: 3px;      float: left;      margin: 1px;    }    #pin-session .pin_ico ul.dots.first li {      margin-top: 15px;    }    #pin-session .pin_ico ul.dots.last li {      margin-left: 6px;    }    .pin-default {      margin-left: -102px;    }    .pin-folded {      animation-name: close-pin;      /*animation-duration: 1s;*/      -webkit-animation: close-pin 1s ease-in-out forwards;      -moz-animation: close-pin 1s ease-in-out forwards;      -o-animation: close-pin 1s ease-in-out forwards;      animation: close-pin 1s ease-in-out forwards;    }    .pin-unfolded {      animation-name: open-pin;      animation-duration: 1s;    }    /* PIN RTL CLASSES*/    body.rtl {      direction: rtl;    }    body.rtl #pin-session-text {      text-align: center;    }    /* PIN SESSION STYLES */    body.rtl #pin-session {      position: fixed;      font-weight: lighter;      right: 0;      left: inherit;      bottom: 0;      height: 32px;      /*padding-left: 32px;*/      padding-right: 10px;      z-index: 9999;    }    body.rtl #pin-session #pin-session-container {      background: #333333;      background: rgba(51, 51, 51, 0.8);      height: 24px;      -webkit-box-sizing: content-box;      -moz-box-sizing: content-box;      box-sizing: content-box;      /*margin-right: -44px;*/      border-left: 2px solid #0d8abe;      border-right: 0;      padding: 4px 28px 4px 0;    }    body.rtl #pin-session #pin-session-container span.pin {      color: white;      display: inline-block;      font-size: 14px;      letter-spacing: 0.08em;      margin: 4px 0 0 7px;      font-family: Helvetica, arial, sans-serif;      padding: 0 5px;    }    body.rtl #pin-session #pin-session-container .info {      position: absolute;      border: none;      top: 8px;      padding: 0;      right: 38px;    }    body.rtl #pin-session #pin-session-container .info span {      background: none repeat scroll 0 0 rgba(0, 0, 0, 0.2);      border-radius: 16px;      color: white;      display: inline-block;      font-size: 12px;      margin-left: 6px;      padding: 2px;      text-align: center;      width: 15px;      position: relative;      cursor: pointer;      font-family: Helvetica, arial, sans-serif;      line-height: 15px;    }    body.rtl #pin-session #pin-session-container .info .info_txt {      display: none;      font-size: 12px;      width: 250px;      background: white;      background: rgba(255, 255, 255, 0.95);      padding: 14px;      border-radius: 4px;      color: #333333;      text-align: left;      position: absolute;      box-shadow: 4px 4px 1px rgba(0, 0, 0, 0.3);      border: 1px solid #e7e7e7;      line-height: 1.4em;      font-family: Helvetica, Arial, sans-serif;      bottom: 30px;      left: 0px;    }    body.rtl #pin-session #pin-session-container .info .info_txt p {      margin: 2px 0 0;      padding: 0;    }    body.rtl #pin-session #pin-session-container .info:hover .info_txt {      display: block;    }    /* PIN ICON */    body.rtl #pin-session .pin_ico {      height: 32px;      width: 32px;      right: 0;      cursor: pointer;      top: 0;      background: #333333;      position: absolute;    }    body.rtl #pin-session .pin_ico .label {      right: 9px;      top: 3px;      background: none;      padding: 0;      position: absolute;      font-family: Helvetica, Arial, sans-serif;      font-size: 9px;      color: #cccccc;      font-weight: normal;      margin: 0;      width: auto;      height: auto;      line-height: 10px;    }    body.rtl #pin-session .pin_ico ul.dots {      margin: 0 auto;      padding: 0;      width: 15px;      height: 4px;    }    body.rtl #pin-session .pin_ico ul.dots li {      list-style: none;      background: white;      height: 3px;      width: 3px;      float: left;      margin: 1px;    }    body.rtl #pin-session .pin_ico ul.dots.first li {      margin-top: 15px;    }    body.rtl #pin-session .pin_ico ul.dots.last li {      margin-left: 6px;    }    /* END PIN ICON */    body.rtl .pin-default {      margin: 0 -102px 0 0;    }    body.rtl .pin-folded {      animation-name: close-pin-rtl;      /*animation-duration: 1s;*/      -webkit-animation: close-pin-rtl 1s ease-in-out forwards;      -moz-animation: close-pin-rtl 1s ease-in-out forwards;      -o-animation: close-pin-rtl 1s ease-in-out forwards;      animation: close-pin-rtl 1s ease-in-out forwards;    }    body.rtl .pin-unfolded {      animation-name: open-pin-rtl;      animation-duration: 1s;    }    /* The animation code */    @keyframes close-pin {      0% {        margin-left: 0px;      }      100% {        margin-left: -102px;      }    }    @keyframes open-pin {      0% {        margin-left: -102px;      }      100% {        margin-left: 0px;      }    }    @keyframes close-pin-rtl {      0% {        margin-right: 0px;      }      100% {        margin-right: -102px;      }    }    @keyframes open-pin-rtl {      0% {        margin-right: -102px;      }      100% {        margin-right: 0px;      }    }  </style>  <script>    /*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */    "document" in self && ("classList" in document.createElement("_") && (!document.createElementNS || "classList" in      document.createElementNS("http://www.w3.org/2000/svg", "g")) || function (a) {        if ("Element" in a) {          a = a.Element.prototype;          var h = Object,            l = String.prototype.trim || function () {              return this.replace(/^s+|s+$/g, "")            },            n = Array.prototype.indexOf || function (c) {              for (var b = 0, k = this.length; b < k; b++)                if (b in this && this[b] === c) return b;              return -1            },            f = function (c, b) {              this.name = c;              this.code = DOMException[c];              this.message = b            },            e = function (c,              b) {              if ("" === b) throw new f("SYNTAX_ERR", "The token must not be empty.");              if (/s/.test(b)) throw new f("INVALID_CHARACTER_ERR", "The token must not contain space characters.");              return n.call(c, b)            },            g = function (c) {              var b = l.call(c.getAttribute("class") || "");              b = b ? b.split(/s+/) : [];              for (var k = 0, e = b.length; k < e; k++) this.push(b[k]);              this._updateClassName = function () {                /* with replace we escape html elements to avoid xss */                c.setAttribute("class", this.toString().replace(/</g, "&lt;").replace(/>/g, "&gt;"))              }            },            d = g.prototype = [],            m = function () {              return new g(this)            };          f.prototype = Error.prototype;          d.item = function (c) {            return this[c] ||              null          };          d.contains = function (c) {            return !~e(this, c + "")          };          d.add = function () {            var c = arguments,              b = 0,              k = c.length,              d = !1;            do {              var a = c[b] + "";              ~e(this, a) && (this.push(a), d = !0)            } while (++b < k);            d && this._updateClassName()          };          d.remove = function () {            var c = arguments,              b = 0,              d = c.length,              a = !1,              f;            do {              var g = c[b] + "";              for (f = e(this, g); ~f;) this.splice(f, 1), a = !0, f = e(this, g)            } while (++b < d);            a && this._updateClassName()          };          d.toggle = function (c, b) {            var a = this.contains(c),              d = a ? !0 !== b && "remove" : !1 !== b && "add";            if (d) this[d](c);            return !0 === b || !1 === b ? b : !a          };          d.replace = function (c,            b) {            var a = e(c + "");            ~a && (this.splice(a, 1, b), this._updateClassName())          };          d.toString = function () {            return this.join(" ")          };          if (h.defineProperty) {            d = {              get: m,              enumerable: !0,              configurable: !0            };            try {              h.defineProperty(a, "classList", d)            } catch (c) {              if (void 0 === c.number || -2146823252 === c.number) d.enumerable = !1, h.defineProperty(a, "classList",                d)            }          } else h.prototype.__defineGetter__ && a.__defineGetter__("classList", m)        }      }(self), function () {        var a = document.createElement("_");        a.classList.add("c1", "c2");        if (!a.classList.contains("c2")) {          var h =            function (a) {              var f = DOMTokenList.prototype[a];              DOMTokenList.prototype[a] = function (a) {                var e, d = arguments.length;                for (e = 0; e < d; e++) a = arguments[e], f.call(this, a)              }            };          h("add");          h("remove")        }        a.classList.toggle("c3", !1);        if (a.classList.contains("c3")) {          var l = DOMTokenList.prototype.toggle;          DOMTokenList.prototype.toggle = function (a, f) {            return 1 in arguments && !this.contains(a) === !f ? f : l.call(this, a)          }        }        "replace" in document.createElement("_").classList || (DOMTokenList.prototype.replace = function (a, f) {          var e = this.toString().split(" "),            g = e.indexOf(a + "");          ~g && (e = e.slice(g), this.remove.apply(this, e), this.add(f), this.add.apply(this, e.slice(1)))        });        a = null      }());  <\/script></head><body>  <div id="pin-session">    <div id="pin-session-container" class="pin-default">      <span class="pin" id="pin-session-text"></span>      <div class="pin_ico" tabindex="1" onclick="openPinSession()">        <p class="label">PIN</p>        <ul class="dots first">          <li></li>          <li></li>          <li></li>        </ul>        <ul class="dots">          <li></li>          <li></li>          <li></li>        </ul>        <ul class="dots last">          <li></li>        </ul>      </div>    </div>  </div>  <script>    function openPinSession() {      if (document.getElementById("pin-session-container").classList.contains("pin-unfolded")) {        document.getElementById("pin-session-container").classList.remove("class", "pin-unfolded");        document.getElementById("pin-session-container").classList.add("class", "pin-folded");      } else {        displayPin();        document.getElementById("pin-session-container").classList.remove("class", "pin-folded");        document.getElementById("pin-session-container").classList.remove("class", "pin-default");        document.getElementById("pin-session-container").classList.add("class", "pin-unfolded");      }    };    function displayPin() {      try {        var data = JSON.stringify({ action: "GET-ALPHA" });        parent.postMessage(data, "*");      } catch (e) {        console.log(e);      }    };  <\/script></body></html>',this._whisbiIFrameAlphaName="pinsessionframe",this.createAlpha(),this.checkHtml()}return e.prototype.createAlpha=function(){var e=document.createElement("style");document.head.appendChild(e),e.innerHTML="iframe#"+this._whisbiIFrameAlphaName+"{\n                    border: none;\n                    position: fixed;\n                    left: 0;\n                    bottom: 0;\n                    max-width: 325px;\n                    width: 0px;\n                    height: 0px;\n                    z-index: 9998;\n                    }"},e.prototype.checkHtml=function(){var e=this;if("/* @echo index_html_alpha */"!==this._indexHTMLAlpha)return this.injectAppIntoAlphaIFrame();var t=new XMLHttpRequest;t.onreadystatechange=function(){if(t.readyState===XMLHttpRequest.DONE&&200===t.status)return e._indexHTMLAlpha=t.responseText,e.injectAppIntoAlphaIFrame()},t.open("GET","./pin2whisbi/index.html",!0),t.send()},e.prototype.injectAppIntoAlphaIFrame=function(){var t=this;return this.AlphaIFrame=document.createElement("iframe"),this.AlphaIFrame.id=this._whisbiIFrameAlphaName,this.AlphaIFrame.title="PIN number button",document.body.appendChild(this.AlphaIFrame),this.AlphaIFrame.tabIndex=-1,setTimeout(function(){var e=t.AlphaIFrame.contentDocument;return e.open(),e.write(t._indexHTMLAlpha),e.close(),!0},0),!(window.whisbi.status="loaded")},e}();t.PinSession=n})},{}],2:[function(n,i,o){!function(e){if("object"==typeof i&&"object"==typeof i.exports){var t=e(n,o);void 0!==t&&(i.exports=t)}else"function"==typeof define&&define.amd&&define(["require","exports"],e)}(function(e,t){"use strict";t.__esModule=!0;var n=function(){function e(e,t,n,i,o){this._iframeId=e,this._draggerWrapperId=t,this._draggerId=n,this._direction=i,this._position=o;var s="right: "+this._position.marginX+"px;";"rtl"===this._direction&&(s="left: "+this._position.marginX+"px;"),this._draggerJS="\n    var isResizing = false;\n    var lastDownX = 0;\n\n    checkGrabAvailable();\n\n    function checkGrabAvailable() {\n      var wframe = document.getElementById('"+this._iframeId+"');\n\n      handle = document.getElementById('"+this._draggerId+"');\n      if (handle && wframe) {\n          addDocumentListener();\n          handle.addEventListener('mousedown', function(e) {\n              isResizing = true;\n              lastDownX = e.clientX;\n              wframe.classList.add('no-pointer-event');\n          });\n      } else {\n          setTimeout(checkGrabAvailable, 1000);\n      }\n    }\n\n    function addDocumentListener() {\n        handle = document.getElementById('"+this._draggerWrapperId+"');\n        handle.classList.add('noselect');\n\n        document.addEventListener('mousemove', function(e) {\n            // we don't want to do anything if we aren't resizing.\n            if (!isResizing) {\n                return;\n            }\n            var ltrPosition = window.innerWidth - e.clientX - 15;\n            var rtlPosition = e.clientX - 15;\n            handle.style.width = "+this._direction+"Position + \"px\";\n        });\n\n        document.addEventListener('mouseup', function(e) {\n            var wframe = document.getElementById('"+this._iframeId+"');\n            isResizing = false;\n            wframe.classList.remove('no-pointer-event');\n        });\n    }\n    ",this._draggerCss="\n    .noselect {\n      -webkit-touch-callout: none; /* iOS Safari */\n      -webkit-user-select: none; /* Safari */\n      -khtml-user-select: none; /* Konqueror HTML */\n      -moz-user-select: none; /* Firefox */\n      -ms-user-select: none; /* Internet Explorer/Edge */\n      user-select: none; /* Non-prefixed version, currently supported by Chrome and Opera */\n    }\n\n    .whisbi-session-active {\n      overflow: hidden !important;\n      height: 100% !important;\n      width: 100% !important;\n      position: fixed !important;\n      margin: 0 !important;\n    }\n\n    #"+this._draggerWrapperId+"{\n      position: fixed;\n      "+s+"\n      z-index:99999;\n      bottom: "+this._position.marginY+"px;\n      width: 190px;\n      height: 95px;\n    }\n\n    @media screen and (min-device-width: 372px) {\n      #"+this._draggerWrapperId+"{\n          min-width:372px;\n          max-width: 80%;\n      }\n    }\n\n    #"+this._draggerId+" {\n      position: absolute;\n      display: none;\n      top: 0;\n      bottom: 0;\n      width: 7px;\n      cursor: w-resize;\n      background: #fafafa;\n      opacity: 0.95;\n      -webkit-box-shadow: -3px 0px 12px 0px rgba(0, 0, 0, 0.16);\n      -moz-box-shadow:    -3px 0px 12px 0px rgba(0, 0, 0, 0.16);\n      box-shadow:         -3px 0px 12px 0px rgba(0, 0, 0, 0.16);\n    }\n\n    .no-pointer-event{\n      pointer-events: none;\n    }\n\n    .grab-hand{\n      height: 10px;\n      position: absolute;\n      top: 48%;\n      left: 1px;\n      border-right: 1px solid #000000;\n      opacity:0.54;\n    }\n\n    #grab-hand1{\n      left:2px;\n    }\n\n    #grab-hand2{\n      left:4px;\n    }\n    ","rtl"===this._direction?this._draggerCss+=" #"+this._draggerId+" {\n        right: -7px;\n        -webkit-box-shadow: 3px 0px 12px 0px rgba(0, 0, 0, 0.16);\n        -moz-box-shadow:    3px 0px 12px 0px rgba(0, 0, 0, 0.16);\n        box-shadow:         3px 0px 12px 0px rgba(0, 0, 0, 0.16);\n      } ":this._draggerCss+=" #"+this._draggerId+" { left: -7px } ",this.injectDraggerCSS(),this.createDragger(),this.injectDraggerJs()}return e.prototype.createDragger=function(){var e=document.getElementById(this._draggerWrapperId);e&&document.body.removeChild(e),this._draggerElement=document.createElement("div"),this._draggerElement.id=this._draggerWrapperId,document.body.appendChild(this._draggerElement);var t=document.createElement("div");t.id=this._draggerId,this._draggerElement.appendChild(t);var n=document.createElement("div");n.id="grab-hand1",n.className="grab-hand",t.appendChild(n);var i=document.createElement("div");i.id="grab-hand2",i.className="grab-hand",t.appendChild(i)},e.prototype.injectDraggerJs=function(){var e=document.createElement("script");e.innerHTML=this._draggerJS,e.type="text/javascript",document.body.appendChild(e)},e.prototype.injectDraggerCSS=function(){var e=document.createElement("style");e.innerHTML=this._draggerCss,document.head.appendChild(e)},e.prototype.getGrabberElement=function(){return this._draggerElement},e}();t.Dragger=n})},{}],3:[function(n,i,o){!function(e){if("object"==typeof i&&"object"==typeof i.exports){var t=e(n,o);void 0!==t&&(i.exports=t)}else"function"==typeof define&&define.amd&&define(["require","exports","./alpha","./dragger"],e)}(function(e,t){"use strict";t.__esModule=!0;var r=e("./alpha"),c=e("./dragger"),n=function(){function e(){this._indexHTML='<!doctype html><html><head><meta charset="utf-8"><meta http-Equiv="Cache-Control" Content="no-cache"/><meta http-Equiv="Pragma" Content="no-cache"/><meta http-Equiv="Expires" Content="0"/><meta http-equiv="Access-Control-Allow-Origin" content="*"/><meta name="viewport" content="width=device-width,initial-scale=1"><title>Merger</title><base href="/ui">\x3c!-- build:api_url --\x3e<script src="https://library.whisbi.com/uswest2/whisbiapi-2.4.1.min.js"><\/script>\x3c!-- endbuild --\x3e<link rel="icon" type="image/x-icon " href="favicon.ico"><link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400" rel="stylesheet "><link href="https://uswest2-widget.whisbi.com/template/styles.c376b5b99bd34f92374d.bundle.css" rel="stylesheet"/></head><body><app-root></app-root><script type="text/javascript" src="https://uswest2-widget.whisbi.com/template/inline.463d3dbab79092b3e9e7.bundle.js"><\/script><script type="text/javascript" src="https://uswest2-widget.whisbi.com/template/polyfills.20721e552bb315142bbd.bundle.js"><\/script><script type="text/javascript" src="https://uswest2-widget.whisbi.com/template/main.85860828dae69a146322.bundle.js"><\/script></body></html>',this._WhisbiObject="whisbi",this._whisbiIFrameName="wframe"+(new Date).getTime(),this._draggerWrapperId="wb_drag_wrapper"+(new Date).getTime(),this._draggerId="wb_drag"+(new Date).getTime(),this._direction="ltr",this._bubbleShow=!1,this._defaultMarginX=24,this._defaultMarginY=12,this.getProperty=function(e,t){return e.reduce(function(e,t){return e&&e[t]?e[t]:null},t)}}return e.prototype.setup=function(e){if("loaded"!==window.whisbi.status){if(e.version&&(!e.general||!e.general.texts||!e.general.texts.companyName))throw new Error("general.texts.companyName is mandatory!");this._config=e,this._config&&this._config.events&&((this._config.events.otmBroadcastStarted||this._config.events.otmBroadcastEnded)&&(this._config.events.otmBroadcastStartedOrEnded=!0),this._config.events.otoPreSessionRequest&&(this._config.events.otoPreSessionRequested=!0),this._config.events.chatbotBeforeExternalSelect&&(this._config.events.chatbotBeforeExternalSelector=!0),this._config.events.chatbotBeforeDataCollect&&(this._config.events.chatbotBeforeDataCollected=!0),this._config.events.chatbotBeforeExternalCatalog&&(this._config.events.chatbotBeforeExternalCatalogOptions=!0),this._config.events.chatbotBeforeExternalMessageSimple&&(this._config.events.chatbotBeforeExternalMessageSimpleDynamic=!0),this._config.events.checkScoreBeforeWidgetLoaded&&(this._config.events.checkScoreBeforeWidgetLoads=!0)),this._config=this._parseExceptions(this._config),this._config&&this._config.form&&this._config.form.schedule&&this._config.form.schedule.exceptions&&"object"==typeof this._config.form.schedule.exceptions&&(this._config.form.schedule.exceptions=JSON.stringify(this._config.form.schedule.exceptions)),this._direction=this._config.general&&this._config.general.styles&&this._config.general.styles.direction?this._config.general.styles.direction:this._config.config.direction,"rtl"!==this._direction&&(this._direction="ltr"),this.injectStyle(),this.checkHtml(),this.resizeIframeListener(),this.pageScrollListener(),this.mouseOutListener(),this.whisbiEventsListener(),this.WhisbiNonCustomerInteractionEventsListener()}},e.prototype._parseExceptions=function(e){var t=e&&e.oneToOne&&e.oneToOne.schedule&&e.oneToOne.schedule.exceptions;return t&&"object"==typeof t&&(e.oneToOne.schedule.exceptions=JSON.stringify(t)),e},e.prototype.openWidget=function(e){var t=this.processWidgetData(e);this.IFrame&&t&&t.action&&this.IFrame.contentWindow.postMessage(JSON.stringify(t),"*")},e.prototype.setNowInteractScore=function(e){e&&"object"==typeof e&&0<Object.keys(e).length&&(e.action="setNowInteractScore",this.IFrame&&this.IFrame.contentWindow.postMessage(JSON.stringify(e),"*"))},e.prototype.processWidgetData=function(e){return e&&"object"==typeof e&&0<Object.keys(e).length&&e.action?"oneToOneSession"===e.action?e:"oneToOneWidget"===e.action||"oneToManyWidget"===e.action?{action:e.action}:(console.warn("Wrong paramaters to OPEN WIDGET"),!1):(console.warn("Missing action to open widget"),!1)},e.prototype.setInboundToWhisbiNumber=function(e){this.sendMessageToWidget("whisbi:setInboundToWhisbiNumber",{phone:e})},e.prototype.runCustomCode=function(e){this.sendMessageToWidget("whisbi:runCustomCode",{jsCode:e})},e.prototype.sendKpi=function(e){this.sendMessageToWidget("whisbi:sendKpi",{kpi:e})},e.prototype.getPIN=function(){if(this.IFrame){var e=JSON.stringify({action:"GET-ALPHA"});this.IFrame.contentWindow.postMessage(e,"*")}},e.prototype.changeSchedule=function(t){var n=["availableHours","timeInterval","maxBookingRange","exceptions","dateFormat","firstDayOfWeek"];if("object"==typeof t&&0<Object.keys(t).length){var i={};Object.keys(t).forEach(function(e){n.includes(e)?i[e]=t[e]:console.log("Property "+e+" can't be modified")});var e={oneToOne:{schedule:i}};e=this._parseExceptions(e),this.updateConfig(e)}else console.warn("Wrong paramaters for schedule")},e.prototype.updateConfig=function(e){if(this.IFrame){var t=JSON.stringify({action:"UPDATE-CONFIG",config:e});this.IFrame.contentWindow.postMessage(t,"*")}},e.prototype.sendMessageToWidget=function(e,t){if(this.IFrame){var n={data:t,name:e};this.IFrame.contentWindow.postMessage(n,"*")}},e.prototype.injectStyle=function(){var e=document.createElement("style");document.head.appendChild(e),e.innerHTML="iframe#"+this._whisbiIFrameName+"{\n      width:100%;\n      height:100%;\n      border:none;\n    }\n    ","rtl"===this._direction?e.innerHTML+="#"+this._draggerWrapperId+"{\n         left: 0px;\n       }\n       ":e.innerHTML+="#"+this._draggerWrapperId+"{\n         right: 0px;\n       }\n       "},e.prototype.checkHtml=function(){var e=this;if("/* @echo index_html */"===this._indexHTML){var t=new XMLHttpRequest;t.onreadystatechange=function(){t.readyState===XMLHttpRequest.DONE&&200===t.status&&(e._indexHTML=t.responseText,e.injectAppIntoIFrame())},t.open("GET","./index.html",!0),t.send()}else this.injectAppIntoIFrame()},e.prototype.injectAppIntoIFrame=function(){var t=this;if(this._config.oneToOne&&this._config.oneToOne.pin&&!0===this._config.oneToOne.pin||this._config.config&&this._config.config.alpha&&!0===this._config.config.alpha)new r.PinSession;var e="onDesktop";/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(e="onMobile");var n=this.getProperty(["general","styles","floatingButton",e],this._config);n||(n={marginY:"12",marginX:"12"});var i=parseInt(n.marginX.replace("px",""),10)-this._defaultMarginX;n={marginY:parseInt(n.marginY.replace("px",""),10)-this._defaultMarginY,marginX:i};var o=new c.Dragger(this._whisbiIFrameName,this._draggerWrapperId,this._draggerId,this._direction,n).getGrabberElement(),s=null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent)&&parseFloat(RegExp.$1),a="-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style&&null==/Edge\/[0-9]+(\.[0-9]+)?/.exec(navigator.userAgent);this.IFrame=document.createElement("iframe"),this.IFrame.id=this._whisbiIFrameName,this.IFrame.name=this._whisbiIFrameName,this.IFrame.title="Expert help textbox",o.appendChild(this.IFrame),s||a?this.IFrame.src="//uswest2-widget.whisbi.com/template/index.html":setTimeout(function(){var e=t.IFrame.contentDocument;e.open(),e.write(t._indexHTML),e.close()},0),window.whisbi.status="loaded",window.whisbi.wframe=this._whisbiIFrameName,this._whisbiConfig={action:"WHISBI-CONFIG",config:this._config}},e.prototype.terminalMessage=function(e){var t=document.getElementById("terminal");t&&(t.innerHTML=t.innerHTML+'<br><strong style="color:#00AA00;">>'+e.time+" "+e.title+': </strong><span style="color:'+e.color+';">'+JSON.stringify(e.message,void 0,2)+"</span><br>",t.scrollTop=t.scrollHeight)},e.prototype.resizeFrame=function(e){document.getElementById(this._draggerWrapperId).style.cssText=e},e.prototype.resizePinFrame=function(e){document.getElementById("pinsessionframe").style.cssText=e},e.prototype.setScrollBlocked=function(e){e?document.body.classList.add("whisbi-session-active"):document.body.classList.remove("whisbi-session-active")},e.prototype.resizeIframeListener=function(){var p=this,e=window.addEventListener?"addEventListener":"attachEvent",t=window[e],n="attachEvent"===e?"onmessage":"message";try{t(n,function(e){try{var t=void 0;t="object"==typeof e.data?e.data:JSON.parse(e.data);var n=document.getElementById("pinsessionframe");switch(t.action){case"TOGGLE-RESIZER":var i=document.getElementById(p._draggerId),o=t.show;i&&(i.style.display=o?"block":"none");break;case"RESIZE":var s=document.getElementById(p._draggerWrapperId);s&&(s.style.cssText=t.cssString,"0px"===s.style.height?p.IFrame.tabIndex=-1:p.IFrame.tabIndex=0);break;case"RESIZEPIN":n&&(n.style.cssText=t.cssString,"0px"===n.style.height?n.tabIndex=-1:n.tabIndex=0);break;case"RTLPIN":if(window.pinsessionframe){var a=void 0;a=window.pinsessionframe.contentWindow||window.pinsessionframe.window||window.parent.pinsessionframe.contentWindow||window.parent.pinsessionframe.window,"loaded"===window.whisbi.status&&a.document.body.classList.add("rtl")}break;case"BLOCK-SCROLL":document.body.classList.add("whisbi-session-active");break;case"UNBLOCK-SCROLL":document.body.classList.remove("whisbi-session-active");break;case"TERMINAL":p.terminalMessage(t);break;case"SET-ALPHA":var r;if(window.pinsessionframe)if(r=window.pinsessionframe.contentWindow||window.pinsessionframe.window||window.parent.pinsessionframe.contentWindow||window.parent.pinsessionframe.window,"loaded"===window.whisbi.status){var c=t.value;c&&r&&(r.document.getElementById("pin-session-text").textContent=c,r.document.getElementById("pin-session").style.marginLeft="1px",setTimeout(function(){r.document.getElementById("pin-session").style.marginLeft="0px"},100))}break;case"GET-ALPHA":p.getPIN();break;case"APP-INITIALIZED":p.IFrame.contentWindow.postMessage(JSON.stringify(p._whisbiConfig),"*");break;case"OPEN-DIALER":var d=t.phone;document.location.href="tel:"+d}}catch(e){}},!1)}catch(e){console.error("EVENTER HAS FAILED: ",e)}},e.prototype.whisbiEventsListener=function(){var c=this,e=window.addEventListener?"addEventListener":"attachEvent";(0,window[e])("attachEvent"===e?"onmessage":"message",function(e){if("object"==typeof e.data&&"string"==typeof e.data.name&&"whisbi:"===e.data.name.substr(0,7)){var t=e.data.name.substr(7),n=e.data&&e.data.data;if(c._config.events&&"function"==typeof c._config.events[t])if("otoPreSessionRequest"===t){var i=c;c._config.events[t](n,function(e){i.sendMessageToWidget("whisbi:doRequest",e)})}else if("chatbotBeforeExternalSelect"===t||"chatbotBeforeExternalCatalog"===t||"chatbotBeforeExternalMessageSimple"===t){var o=c;c._config.events[t](n,function(e){o.sendMessageToWidget("whisbi:updateChatBotFields",e)})}else if("checkScoreBeforeWidgetLoaded"===t){var s=c;c._config.events[t](n,function(e){s.sendMessageToWidget("whisbi:loadWidget",e)})}else if("chatbotBeforeDataCollect"===t){var a=c;c._config.events[t](n,function(){a.sendMessageToWidget("whisbi:showDataCollect",{})})}else if(n&&n.waitingResponse){var r=c;c._config.events[t](n,function(e){r.sendMessageToWidget("whisbi:"+t,e)})}else c._config.events[t](e.data.data)}})},e.prototype.WhisbiNonCustomerInteractionEventsListener=function(){var e=window.addEventListener?"addEventListener":"attachEvent";(0,window[e])("attachEvent"===e?"onmessage":"message",function(e){if("object"==typeof e.data&&"string"==typeof e.data.name&&"whisbi:"===e.data.name.substr(0,7)&&"runNowInteractFunction"===e.data.name.substr(7)){var t=e.data.data.function;if(t){var n=window.IMP[t];"function"==typeof n&&n.apply(void 0,e.data.data.arguments)}}})},e.prototype.pageScrollListener=function(){var n=this;document.addEventListener("scroll",function(e){if(300<(window.pageYOffset||document.body.scrollTop)&&!n._bubbleShow){var t=JSON.stringify({action:"SHOW_BUBBLE"});n.IFrame&&(n.IFrame.contentWindow.postMessage(t,"*"),n._bubbleShow=!0)}},!0)},e.prototype.mouseOutListener=function(){var n=this;document.addEventListener("mouseleave",function(e){if(e.offsetY<0&&!n._bubbleShow){var t=JSON.stringify({action:"SHOW_BUBBLE"});n.IFrame&&n.IFrame.contentWindow.postMessage(t,"*")}},!0)},e}();t.default=n,window.whisbi&&"loaded"===window.whisbi.status||(window.whisbi=new n,window.whisbi.d=(new Date).getTime())})},{"./alpha":1,"./dragger":2}]},{},[3]);